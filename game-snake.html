<!DOCTYPE html>
<html lang="az">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>İlan Oyunu | Baki-Sumqayit.site</title>
    <meta name="description" content="Klassik İlan oyunu. Yemləri yeyin və ilanınızı böyüdün.">
    <link rel="canonical" href="https://www.baki-sumqayit.site/game-snake.html">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-W05T401WMG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-W05T401WMG');
    </script>

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3725039577144467"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="game-style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Favicon Settings -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="manifest" href="/site.webmanifest">
</head>

<body>

    <header class="sticky-header">
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i>
            <span>Ana Səhifə</span>
        </a>
        <div class="site-logo">baki-sumqayit.site</div>
    </header>

    <div class="main-container">

        <main class="game-wrapper" id="game-container">
            <div id="snake-game-area" class="relative">
                <div class="header flex justify-between items-center mb-4 text-white">
                    <h1 class="text-2xl font-bold">İlan</h1>
                    <div class="bg-white/20 px-4 py-2 rounded-lg">
                        <span class="text-xs uppercase opacity-70 block">Xal</span>
                        <span id="score" class="text-xl font-bold">0</span>
                    </div>
                </div>

                <canvas id="gameCanvas" width="320" height="320"
                    class="bg-gray-800 rounded-lg shadow-xl mx-auto block w-full max-w-[320px]"></canvas>

                <div class="controls mt-4 flex justify-center gap-2 md:hidden">
                    <div class="flex flex-col items-center gap-2">
                        <button id="btn-up" class="d-btn"><i class="fas fa-chevron-up"></i></button>
                        <div class="flex gap-2">
                            <button id="btn-left" class="d-btn"><i class="fas fa-chevron-left"></i></button>
                            <button id="btn-down" class="d-btn"><i class="fas fa-chevron-down"></i></button>
                            <button id="btn-right" class="d-btn"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                </div>

                <div class="hidden md:block text-center text-white/60 text-sm mt-4">
                    Ox düymələri ilə idarə edin
                </div>

                <!-- Game Over Modal -->
                <div id="game-over-modal"
                    class="absolute inset-0 bg-slate-900/95 rounded-lg flex-col items-center justify-center hidden z-10">
                    <h2 class="text-3xl font-bold text-red-500 mb-2">Oyun Bitdi!</h2>
                    <p class="text-white text-lg mb-6">Xalınız: <span id="final-score"
                            class="font-bold text-yellow-400">0</span></p>
                    <button class="btn-restart" onclick="startGame()">Yenidən Oyna</button>
                </div>
            </div>
        </main>

        <!-- Other Games Panel -->
        <section class="other-games-panel">
            <div class="panel-title">
                <i class="fas fa-gamepad"></i>
                Digər Oyunlar
            </div>
            <div class="games-scroll-container">
                <a href="game-2048.html" class="game-card">
                    <div class="game-icon"><i class="fa-solid fa-layer-group"></i></div>
                    <div class="game-name">2048</div>
                </a>
                <a href="game-flappy.html" class="game-card">
                    <div class="game-icon"><i class="fa-solid fa-dove"></i></div>
                    <div class="game-name">Uçan Top</div>
                </a>
                <a href="game-arkanoid.html" class="game-card">
                    <div class="game-icon"><i class="fa-solid fa-cubes"></i></div>
                    <div class="game-name">Kərpic</div>
                </a>
                <a href="game-reflex.html" class="game-card">
                    <div class="game-icon"><i class="fa-solid fa-bolt"></i></div>
                    <div class="game-name">Refleks</div>
                </a>
                <a href="game-memory.html" class="game-card">
                    <div class="game-icon"><i class="fa-solid fa-brain"></i></div>
                    <div class="game-name">Yaddaş</div>
                </a>
            </div>
        </section>

        <!-- SEO Content -->
        <article class="seo-content">
            <h1>İlan Oyunu - Klassik Əyləncə</h1>
            <h2>Necə Oynanılır?</h2>
            <p>İlanı idarə edərək qırmızı yemləri toplayın. Hər yem yedikdə ilan uzanır. Divarlara və ya öz quyruğunuza
                dəyməyin!</p>
        </article>
    </div>

    <footer>
        <p>&copy; 2024 baki-sumqayit.site - Bütün hüquqlar qorunur.</p>
    </footer>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const finalScoreEl = document.getElementById('final-score');
        const modal = document.getElementById('game-over-modal');

        const gridSize = 16; // Size of on square
        const tileCount = 20; // 20x20 grid (320px)

        let velocityX = 0;
        let velocityY = 0;
        let trail = [];
        let tail = 5;
        let playerX = 10;
        let playerY = 10;
        let appleX = 15;
        let appleY = 15;
        let score = 0;
        let gameLoop;
        let isGameRunning = false;

        function startGame() {
            playerX = 10;
            playerY = 10;
            trail = [];
            tail = 5;
            velocityX = 1; // Start moving right
            velocityY = 0;
            score = 0;
            scoreEl.innerText = score;
            modal.classList.add('hidden');
            modal.classList.remove('flex');

            clearInterval(gameLoop);
            gameLoop = setInterval(game, 1000 / 10); // 10 FPS
            isGameRunning = true;
        }

        function game() {
            playerX += velocityX;
            playerY += velocityY;

            // Walls (Wrap or Die? - Dead is standard for "hit wall")
            if (playerX < 0 || playerX > tileCount - 1 || playerY < 0 || playerY > tileCount - 1) {
                gameOver();
                return;
            }

            // Draw Background
            ctx.fillStyle = '#1e293b';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw Snake
            ctx.fillStyle = '#4ade80'; // Green
            for (let i = 0; i < trail.length; i++) {
                ctx.fillRect(trail[i].x * gridSize, trail[i].y * gridSize, gridSize - 2, gridSize - 2);

                // Self Collision
                if (trail[i].x === playerX && trail[i].y === playerY) {
                    if (tail > 5) gameOver(); // Ignore initial collision on start
                }
            }

            trail.push({ x: playerX, y: playerY });
            while (trail.length > tail) {
                trail.shift();
            }

            // Draw Apple
            ctx.fillStyle = '#ef4444'; // Red
            ctx.fillRect(appleX * gridSize, appleY * gridSize, gridSize - 2, gridSize - 2);

            // Eat Apple
            if (appleX === playerX && appleY === playerY) {
                tail++;
                score += 10;
                scoreEl.innerText = score;
                placeApple();
            }
        }

        function placeApple() {
            appleX = Math.floor(Math.random() * tileCount);
            appleY = Math.floor(Math.random() * tileCount);
            // Don't spawn on snake
            for (let t of trail) {
                if (t.x === appleX && t.y === appleY) {
                    placeApple();
                    return;
                }
            }
        }

        function gameOver() {
            isGameRunning = false;
            clearInterval(gameLoop);
            finalScoreEl.innerText = score;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function keyPush(evt) {
            if (!isGameRunning && modal.classList.contains('hidden')) startGame();

            switch (evt.keyCode) {
                case 37: // Left
                    if (velocityX === 1) return;
                    velocityX = -1; velocityY = 0;
                    break;
                case 38: // Up
                    if (velocityY === 1) return;
                    velocityX = 0; velocityY = -1;
                    break;
                case 39: // Right
                    if (velocityX === -1) return;
                    velocityX = 1; velocityY = 0;
                    break;
                case 40: // Down
                    if (velocityY === -1) return;
                    velocityX = 0; velocityY = 1;
                    break;
            }
        }

        document.addEventListener('keydown', keyPush);

        // Mobile Controls
        document.getElementById('btn-left').addEventListener('click', () => { if (velocityX !== 1) { velocityX = -1; velocityY = 0; } });
        document.getElementById('btn-up').addEventListener('click', () => { if (velocityY !== 1) { velocityX = 0; velocityY = -1; } });
        document.getElementById('btn-right').addEventListener('click', () => { if (velocityX !== -1) { velocityX = 1; velocityY = 0; } });
        document.getElementById('btn-down').addEventListener('click', () => { if (velocityY !== -1) { velocityX = 0; velocityY = 1; } });

        // Start Game
        startGame();

    </script>
</body>

</html>